<!DOCTYPE html>
<html>
<head>
<title> online book shop </title>
 <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1 id='heading'> Welcome to JavaScript</h1>
<p class="message"> Welcome to javascript </p>
<button id='btn'>Click Me</button>
    <h1>Welcome to Online Book Shop</h1>
    <table>
        <thead>
            <tr>
                <th>BookID</th>
                <th>Title</th>
                <th>Author</th>
                <th>Price</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>Temp</td>
                <td>temp</td>
                <td>$10.99</td>
            </tr>
            <tr>
                <td>2</td>
                <td>temp2</td>
                <td>temp2</td>
                <td>$8.99</td>
            </tr>
            <tr>
                <td>3</td>
                <td>temp3</td>
                <td>temp3</td>
                <td>$12.99</td>
            </tr>
        </tbody>
    </table>
    
    <form id="bookForm">
        <label for="bookID">Book ID:</label>
        <input type="text" id="bookID" name="bookID" required>
        
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" required>
        
        <label for="author">Author:</label>
        <input type="text" id="author" name="author" required>
        
        <label for="price">Price:</label>
        <input type="text" id="price" name="price" required>
        
        <input type="submit" value="Add Book">
    </form>
    <script>
    function exampleVar()
    {
    	var x=10;
    	if(true)
    		{
    		var x=20;
    		console.log(x);
    		}
    	console.log(x);
    }
     
    function exampleLet()
    {
    	let x=10;
    	if(true)
    		{
    		let x=20;
    		console.log(x);
    		
    		}
    	console.log(x);
    }
    exampleVar();
    exampleLet();
    
    let name = "Tanuj";
    console.log("Hello, " + name + " Welcome");
 
    name = "Tanuj";
    console.log(`Hello, ${name} Welcome`);
 
    let text1 = "This is line1. \n" + "This is line2.";
    console.log(text1);
 
    text1 = `This is line1.
			This is line2.`;
    console.log(text1);
 
    let product = "Laptop";
    let price = 55000;
    console.log(`The price of ${product} is ${price}`);
    
 // String Methods
    let text = "  JavaScript is Awesome!  ";
    console.log("Original Text:", text);
     
    console.log("Length:", text.length);
    console.log("To Upper Case:", text.toUpperCase());
    console.log("To Lower Case:", text.toLowerCase());
    console.log("Trimmed Text:", text.trim());
    console.log("Slice (2, 10):", text.slice(2, 10));
    console.log("Replace 'Java' with 'Type':", text.replace("Java", "Type"));
     
    let text2 = "value1, value2, value3";
    console.log("Split by comma:", text2.split(","));
     
    // Array Methods
    let numbers = [10, 20, 30, 40, 50];
    let gadgets = ["Laptop", "Smartphone", "TV"];
     
    console.log("\nOriginal Arrays:");
    console.log("Numbers:", numbers);
    console.log("Gadgets:", gadgets);
     
    console.log("\nAccess Element (index 2):", gadgets[2]);
     
    // Modifying arrays
    gadgets.push("Earphone");
    console.log("After Push:", gadgets);
     
    gadgets.pop();
    console.log("After Pop:", gadgets);
     
    gadgets.shift();
    console.log("After Shift:", gadgets);
     
    gadgets.unshift("Mic");
    console.log("After Unshift:", gadgets);
     
    console.log("Index of 'Smartphone':", gadgets.indexOf("Smartphone"));
    console.log("Includes 'Earphone':", gadgets.includes("Earphone"));
     
    console.log("Slice (1, 3):", gadgets.slice(1, 3));
     
    gadgets.splice(1, 2);
    console.log("After Splice (1, 2):", gadgets);
     
    console.log("Join with '-':", gadgets.join("-"));
     
    gadgets.reverse();
    console.log("After Reverse:", gadgets);
     
    gadgets.sort();
    console.log("After Sort:", gadgets);
     
    // Looping through arrays
    console.log("\nUsing forEach:");
    gadgets.forEach((gadget) => console.log(gadget));
     
    // Using map()
    let squaredNumbers = numbers.map(num => num * num);
    console.log("Squared Numbers:", squaredNumbers);
    
 // Objects can have functions as properties
    let user = {
        name: "Tanuj",
        greet: function() {
    console.log(`Hello, my name is ${this.name}`);
        }
    };
    user.greet();
    // Object Destructuring (ES6)
    // -> Extract object properties
    // -> Shorter syntax
    let person = { name1: "Tanuj", age: 25, city: "New Delhi" };
    let { name1, age, city } = person;
    console.log(name1); // Tanuj
    console.log(age); // 25
    // Object Spread Operator (ES6) -> (...)
    // -> Used for copying or merging objects
    // Copy objects
    let obj1 = { a: 12, b: 15 };
    let obj2 = { ...obj1, c: 20 };
    console.log(obj2); // { a: 12, b: 15, c: 20 }
    // Merge objects
    let userID = { name: "Tanuj", age: 25 };
    let userLoc = { city: "ND", country: "India" };
    let userAllD = { ...userID, ...userLoc };
    console.log(userAllD); // { name: "Tanuj", age: 25, city: "ND", country: "India" }
    for (let key in person) {
        console.log(key + ": " + person[key]);
    }

    for (let gadget of gadgets) {
        console.log(gadget);
    }

    for (let number of numbers) {
        console.log(number);
    }



    const add = function(a, b) {
        return a + b;
    };
    console.log(add(4, 5));

    const multiply = (x, y) => x * y;
    console.log(multiply(12, 23));

    const cube = x => x * x * x;
    console.log(cube(5));

    const greet = (name) => {
        let message = `Hello, ${name}, Welcome`;
        return message;
    };
    console.log(greet("Tanuj"));

    // Higher Order Function (HOF)
    const hofExample = (fn, x, y) => {
        return fn(x, y);
    };
    console.log(hofExample(add, 4, 5));

    // Object with function as property
    let user2 = {
        name: "Tanuj",
        greet: function() {
            console.log(`Hello, my name is ${this.name}`);
        }
    }
    
 
    const hotelRooms = [
        { type: "standard", price: 100, available: true },
        { type: "deluxe", price: 200, available: false },
        { type: "suite", price: 300, available: true },
        { type: "standard", price: 120, available: false },
        { type: "suite", price: 250, available: true }
    ];

    const findAvailableRooms = (minPrice, maxPrice) => {
        return hotelRooms.filter(room => room.price >= minPrice && room.price <= maxPrice && room.available);
    };

    const availableRooms = findAvailableRooms(100, 250);
    console.log(availableRooms);

    const generateReceipt = (cartItems) => {
        let totalAmount = 0;

        for (let i = 0; i < cartItems.length; i++) {
            totalAmount += cartItems[i].price * cartItems[i].quantity;
        }

        return totalAmount;
    };

    const cartItems = [
        { name: "Apple", price: 10, quantity: 3 },
        { name: "Banana", price: 5, quantity: 6 },
        { name: "Orange", price: 8, quantity: 2 }
    ];

    const total = generateReceipt(cartItems);
    console.log(`Total Amount: â‚¹${total}`);
    
    const studentData = {
    	    name: "Temp",
    	    marks: {
    	        maths: 85,
    	        science: 90,
    	        computers: 95
    	    }
    	};

    	const generateReportCard = (studentData) => {
    	    const marks = studentData.marks;
    	    const totalMarks = marks.maths + marks.science + marks.computers;
    	    const subjectsCount = Object.keys(marks).length;
    	    const averageMarks = totalMarks / subjectsCount;
    	    const percentage = (totalMarks / (subjectsCount * 100)) * 100;

    	    return {
    	        totalMarks,
    	        averageMarks,
    	        percentage
    	    };
    	};

    	const reportCard = generateReportCard(studentData);
    	console.log(`Total Marks: ${reportCard.totalMarks}`);
    	console.log(`Average Marks: ${reportCard.averageMarks}`);
    	console.log(`Percentage: ${reportCard.percentage}%`);
    	
    	document.addEventListener("DOMContentLoaded", () => {
    	    // 1. Select elements using different methods
    	    const heading = document.getElementById("heading");
    	    const messages = document.getElementsByClassName("message")[0];
    	    console.log(messages);
    	    const h1Headings = document.getElementsByTagName("h1");
    	 
    	    // Query Selectors
    	    const headingQuery = document.querySelector("#heading"); // Select by ID
    	    const messageQuery = document.querySelector(".message"); // Select by Class
    	 
    	    // 2. Modifying DOM Elements
    	    if (heading) {
    	        console.log("Original Heading:", heading.textContent);
    	        heading.textContent = "something temp";
    	    }
    	 
    	    if (messages) {
    	        messages.innerHTML = "<strong>something temp</strong>";
    	    }
    	 
    	    // Disable a button
    	    const button = document.querySelector("#btn");
    	    if (button) {
    	        button.setAttribute("disabled", "true"); // Disable the button
    	    }
    	 
    	    // 3. Event Handling
    	    if (button) {
    	        button.removeAttribute("disabled"); // Enable button again
    	        button.addEventListener("click", () => {
    	            heading.textContent = "Heading Changed!";
    	            alert("Button Clicked!");
    	        });
    	 
    	        // Change background color on mouseover
    	        button.addEventListener("mouseover", () => {
    	button.style.backgroundColor = "lightblue";
    	        });
    	 
    	        button.addEventListener("mouseout", () => {
    	button.style.backgroundColor = "";
    	        });
    	 
    	        // Keypress event listener
    	        document.addEventListener("keypress", (event) => {
    	            console.log("Key Pressed:", event.key);
    	        });
    	    }
    	});
    	//--------------------------------------------------------------------
    	
    	function fetchData(callback){
    		console.log("Fetched data............");
    		setTimeout(()=>{
    			let data={name:"Tanuj", age:25};
    			callback(data);
    		},3000);
    		console.log("Fetched data 2............");
    	}
    	
    	function processData(data){
    		console.log("Processing data....",data);
    	}
    	fetchData(processData);
    	
    	// promises
    	function fetchData() {
    return new Promise((resolve, reject) => {
        console.log("Fetching data...");
        setTimeout(() => {
            let success = true;
            if (success) {
                resolve({ name: "deepak", age: 25 }); // Fulfills the promise
            } else {
                reject("Error: Failed to fetch data."); // Rejects the promise
            }
        }, 3000);
    });
}

    fetchData()
 
	.then(data => {
 
	    console.log("Processing data------",data);
 
	    return {...data, city:"Indore"};
 
	})
 
	.then((updatedData) => {
 
		 console.log("Processing updated data------",updatedData);
 
	})
 
	.catch(error => {
 
	   console.error(error);
 
	});
    

    async function processData() {
        try {
            const data = await fetchData();
            console.log("Processing data------", data);
            
            const updatedData = { ...data, city: "Indore" };
            console.log("Processing updated data------", updatedData);
        } catch (error) {
            console.error(error);
        }
    }

    processData();
    
 // fetch api
	
 
	async function fetchUserData(id) {
	    try {
	        const response = await fetch("https://jsonplaceholder.typicode.com/users");
	        if (!response.ok) {
	            throw new Error(`Http error : status : ${response.status}`);
	        }
	        const data = await response.json();
	        for(let i=0;i<data.length;i++){
	        	if(data[i].id===id)
	        	console.log("Testing fetch api: Users data: ", data[i]);
	        }
	       // console.log("Testing fetch api: Users data: ", data);
	    } catch (error) {
	        console.log("Testing fetch api: Error: ", error);
	    }
	}

	fetchUserData(5);
	
	async function fetchUserData(ids) {
	    try {
	        const userPromises = ids.map(async id => {
	            const response = await fetch(`https://jsonplaceholder.typicode.com/users/${id}`);
	            if (!response.ok) {
	                throw new Error(`Http error: status: ${response.status}`);
	            }
	            return response.json();
	        });
	        
	        const users = await Promise.all(userPromises);
	        users.forEach(user => console.log("Testing fetch API: Users data:", user));
	    } catch (error) {
	        console.log("Testing fetch API: Error:", error);
	    }
	}

	fetchUserData([2, 6, 11]);

	function createUser(newUser) {
	    fetch("https://jsonplaceholder.typicode.com/users", { 
	        method: "POST",
	        headers: {
	            "Content-Type": "application/json" 
	        },
	        body: JSON.stringify(newUser) 
	    })
	    .then(response => response.json())
	    .then(data => {
	        console.log("User created successfully:", data); 
	    })
	    .catch(error => {
	        console.error("Error creating user:", error); 
	    });
	}
	 
	
	let user4 = { name: "Mr.X", email: "mrx@gmail.com" };
	createUser(user4);
	
	function deleteUser(userId) {
	    const confirmation = window.confirm(`Are you sure you want to delete the user with ID: ${userId}?`);
	    if (!confirmation) {
	        console.log('Deletion cancelled.');
	        return; 
	    }
	 
	    fetch(`https://jsonplaceholder.typicode.com/users/${userId}`, {
	        method: 'DELETE',
	        headers: {
	            'Content-Type': 'application/json',
	        }
	    })
	    .then(response => {
	        if (response.ok) {
	            console.log(`User with ID: ${userId} deleted.`);
	        } else {
	            console.error('Error deleting user:', response.statusText);
	        }
	    })
	    .catch(error => {
	        console.error('Error:', error);
	    });
	}
	
	deleteUser(1);
	
	async function updateUser(userId, userData) {
	    try {
	        const response = await fetch(`https://jsonplaceholder.typicode.com/users/${userId}`, {
	            method: 'PUT',
	            headers: {
	                'Content-Type': 'application/json',
	            },
	            body: JSON.stringify(userData),
	        });

	        if (!response.ok) {
	            throw new Error('Error updating user: ' + response.statusText);
	        }

	        const data = await response.json();
	        console.log(`User with ID: ${userId} updated.`, data);
	    } catch (error) {
	        console.error('Error:', error);
	    }
	}

	const updatedUserData = {
	    name: "John Doe",
	    email: "john.doe@example.com",
	    address: {
	        street: "123 Main St",
	        city: "Anytown",
	        zipcode: "12345"
	    },
	    phone: "123-456-7890",
	    website: "johndoe.com"
	};

	updateUser(1, updatedUserData);
	
	async function updateUserSpecific(userId, specificFields) {
	    try {
	        const response = await fetch(`https://jsonplaceholder.typicode.com/users/${userId}`, {
	            method: 'PATCH',
	            headers: {
	                'Content-Type': 'application/json',
	            },
	            body: JSON.stringify(specificFields),
	        });

	        if (!response.ok) {
	            throw new Error('Error updating user: ' + response.statusText);
	        }

	        const data = await response.json();
	        console.log(`User with ID: ${userId} updated with specific fields.`, data);
	    } catch (error) {
	        console.error('Error:', error);
	    }
	}

	const specificFieldsToUpdate = {
	    email: "new.email@example.com",
	    phone: "987-654-3210"
	};

	updateUserSpecific(1, specificFieldsToUpdate);

    </script>
    <script type="module" src="app.js"></script>
    
    </body>
    
</html>